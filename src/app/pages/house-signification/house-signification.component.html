<main class="min-h-screen bg-background relative">
  <!-- Cosmic Background with Stars -->
  <div class="cosmic-background fixed inset-0 z-0">
    <div class="twinkling"></div>
    <!-- Additional cosmic elements -->
    <div class="absolute inset-0 overflow-hidden">
      <div class="absolute top-20 left-10 w-96 h-96 bg-primary/10 rounded-full blur-3xl animate-pulse"></div>
      <div class="absolute bottom-20 right-10 w-96 h-96 bg-accent/10 rounded-full blur-3xl animate-pulse"
        style="animation-delay: 1s;"></div>
      <div class="absolute top-1/2 left-1/2 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl animate-pulse"
        style="animation-delay: 2s;"></div>
    </div>
  </div>

  <app-header></app-header>

  <div class="container mx-auto px-4 pt-24 pb-16 relative z-10">
    <!-- Page Header -->
    <div class="text-center mb-16 relative">
      <div class="absolute inset-0 flex items-center justify-center">
        <div class="cosmic-glow w-96 h-96 rounded-full blur-3xl opacity-20"></div>
      </div>
      <h1 class="text-5xl md:text-6xl font-playfair font-bold text-foreground mb-4 relative z-10">
        House Significations
      </h1>
      <p class="text-xl md:text-2xl text-foreground/70 mb-6 relative z-10">
        Explore the cosmic meanings and influences of all 12 astrological houses
      </p>
      <div class="flex items-center justify-center gap-2 relative z-10">
        <div class="h-px w-20 bg-gradient-to-r from-transparent via-primary to-primary"></div>
        <span class="text-3xl">üèõÔ∏è</span>
        <div class="h-px w-20 bg-gradient-to-l from-transparent via-primary to-primary"></div>
      </div>
    </div>

    <!-- Interactive House Wheel and Details Side by Side -->
    <div class="grid lg:grid-cols-2 gap-8 lg:gap-12 mb-16 items-start">
      <!-- Vedic Kundali Chart -->
      <div class="relative order-2 lg:order-1">
        <div class="kundali-chart-container relative mx-auto"
          style="max-width: 100%; aspect-ratio: 1; transform: scale(0.7); transform-origin: center;">
          <!-- North Indian Vedic Chart Design -->
          <svg class="kundali-svg" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">
            <!-- Background -->
            <rect width="600" height="600" fill="rgba(10, 10, 15, 0.95)" rx="8" ry="8" stroke="rgba(255, 193, 99, 0.8)"
              stroke-width="3" />

            <!-- Central Square -->
            <rect x="180" y="180" width="240" height="240" fill="none" stroke="rgba(255, 193, 99, 0.6)"
              stroke-width="2" />

            <!-- House 1 - Top Center (Rhombus) -->
            <g class="house-area" data-house="1" (click)="selectHouse(houses[0])">
              <polygon points="300,0 420,180 300,300 180,180"
                [attr.fill]="selectedHouse?.number === 1 ? houses[0].color + '40' : 'rgba(255, 193, 99, 0.1)'"
                [attr.stroke]="selectedHouse?.number === 1 ? houses[0].color + '80' : 'rgba(255, 193, 99, 0.3)'"
                stroke-width="2" />
              <text x="300" y="150" text-anchor="middle" fill="white" font-size="24" font-weight="bold">{{
                houses[0].number }}</text>
            </g>

            <!-- House 4 - Left Center (Rhombus) -->
            <g class="house-area" data-house="4" (click)="selectHouse(houses[3])">
              <polygon points="0,300 180,180 300,300 180,420"
                [attr.fill]="selectedHouse?.number === 4 ? houses[3].color + '40' : 'rgba(255, 193, 99, 0.1)'"
                [attr.stroke]="selectedHouse?.number === 4 ? houses[3].color + '80' : 'rgba(255, 193, 99, 0.3)'"
                stroke-width="2" />
              <text x="100" y="310" text-anchor="middle" fill="white" font-size="24" font-weight="bold">{{
                houses[3].number }}</text>
            </g>

            <!-- House 7 - Bottom Center (Rhombus) -->
            <g class="house-area" data-house="7" (click)="selectHouse(houses[6])">
              <polygon points="300,600 180,420 300,300 420,420"
                [attr.fill]="selectedHouse?.number === 7 ? houses[6].color + '40' : 'rgba(255, 193, 99, 0.1)'"
                [attr.stroke]="selectedHouse?.number === 7 ? houses[6].color + '80' : 'rgba(255, 193, 99, 0.3)'"
                stroke-width="2" />
              <text x="300" y="470" text-anchor="middle" fill="white" font-size="24" font-weight="bold">{{
                houses[6].number }}</text>
            </g>

            <!-- House 10 - Right Center (Rhombus) -->
            <g class="house-area" data-house="10" (click)="selectHouse(houses[9])">
              <polygon points="600,300 420,420 300,300 420,180"
                [attr.fill]="selectedHouse?.number === 10 ? houses[9].color + '40' : 'rgba(255, 193, 99, 0.1)'"
                [attr.stroke]="selectedHouse?.number === 10 ? houses[9].color + '80' : 'rgba(255, 193, 99, 0.3)'"
                stroke-width="2" />
              <text x="500" y="310" text-anchor="middle" fill="white" font-size="24" font-weight="bold">{{
                houses[9].number }}</text>
            </g>

            <!-- Corner Houses - Top Left (2, 3) -->
            <g class="house-area" data-house="2" (click)="selectHouse(houses[1])">
              <polygon points="0,0 180,180 0,150"
                [attr.fill]="selectedHouse?.number === 2 ? houses[1].color + '40' : 'rgba(255, 193, 99, 0.1)'"
                [attr.stroke]="selectedHouse?.number === 2 ? houses[1].color + '80' : 'rgba(255, 193, 99, 0.3)'"
                stroke-width="2" />
              <text x="60" y="110" text-anchor="middle" fill="white" font-size="20" font-weight="bold">{{
                houses[1].number }}</text>
            </g>

            <g class="house-area" data-house="3" (click)="selectHouse(houses[2])">
              <polygon points="0,150 180,180 0,300"
                [attr.fill]="selectedHouse?.number === 3 ? houses[2].color + '40' : 'rgba(255, 193, 99, 0.1)'"
                [attr.stroke]="selectedHouse?.number === 3 ? houses[2].color + '80' : 'rgba(255, 193, 99, 0.3)'"
                stroke-width="2" />
              <text x="50" y="230" text-anchor="middle" fill="white" font-size="20" font-weight="bold">{{
                houses[2].number }}</text>
            </g>

            <!-- Corner Houses - Bottom Left (5, 6) -->
            <g class="house-area" data-house="5" (click)="selectHouse(houses[4])">
              <polygon points="0,300 180,420 0,450"
                [attr.fill]="selectedHouse?.number === 5 ? houses[4].color + '40' : 'rgba(255, 193, 99, 0.1)'"
                [attr.stroke]="selectedHouse?.number === 5 ? houses[4].color + '80' : 'rgba(255, 193, 99, 0.3)'"
                stroke-width="2" />
              <text x="50" y="390" text-anchor="middle" fill="white" font-size="20" font-weight="bold">{{
                houses[4].number }}</text>
            </g>

            <g class="house-area" data-house="6" (click)="selectHouse(houses[5])">
              <polygon points="0,450 180,420 0,600"
                [attr.fill]="selectedHouse?.number === 6 ? houses[5].color + '40' : 'rgba(255, 193, 99, 0.1)'"
                [attr.stroke]="selectedHouse?.number === 6 ? houses[5].color + '80' : 'rgba(255, 193, 99, 0.3)'"
                stroke-width="2" />
              <text x="60" y="490" text-anchor="middle" fill="white" font-size="20" font-weight="bold">{{
                houses[5].number }}</text>
            </g>

            <!-- Corner Houses - Bottom Right (8, 9) -->
            <g class="house-area" data-house="8" (click)="selectHouse(houses[7])">
              <polygon points="600,450 420,420 600,600"
                [attr.fill]="selectedHouse?.number === 8 ? houses[7].color + '40' : 'rgba(255, 193, 99, 0.1)'"
                [attr.stroke]="selectedHouse?.number === 8 ? houses[7].color + '80' : 'rgba(255, 193, 99, 0.3)'"
                stroke-width="2" />
              <text x="540" y="490" text-anchor="middle" fill="white" font-size="20" font-weight="bold">{{
                houses[7].number }}</text>
            </g>

            <g class="house-area" data-house="9" (click)="selectHouse(houses[8])">
              <polygon points="600,300 420,420 600,450"
                [attr.fill]="selectedHouse?.number === 9 ? houses[8].color + '40' : 'rgba(255, 193, 99, 0.1)'"
                [attr.stroke]="selectedHouse?.number === 9 ? houses[8].color + '80' : 'rgba(255, 193, 99, 0.3)'"
                stroke-width="2" />
              <text x="550" y="390" text-anchor="middle" fill="white" font-size="20" font-weight="bold">{{
                houses[8].number }}</text>
            </g>

            <!-- Corner Houses - Top Right (11, 12) -->
            <g class="house-area" data-house="11" (click)="selectHouse(houses[10])">
              <polygon points="600,150 420,180 600,300"
                [attr.fill]="selectedHouse?.number === 11 ? houses[10].color + '40' : 'rgba(255, 193, 99, 0.1)'"
                [attr.stroke]="selectedHouse?.number === 11 ? houses[10].color + '80' : 'rgba(255, 193, 99, 0.3)'"
                stroke-width="2" />
              <text x="550" y="230" text-anchor="middle" fill="white" font-size="20" font-weight="bold">{{
                houses[10].number }}</text>
            </g>

            <g class="house-area" data-house="12" (click)="selectHouse(houses[11])">
              <polygon points="600,0 420,180 600,150"
                [attr.fill]="selectedHouse?.number === 12 ? houses[11].color + '40' : 'rgba(255, 193, 99, 0.1)'"
                [attr.stroke]="selectedHouse?.number === 12 ? houses[11].color + '80' : 'rgba(255, 193, 99, 0.3)'"
                stroke-width="2" />
              <text x="540" y="110" text-anchor="middle" fill="white" font-size="20" font-weight="bold">{{
                houses[11].number }}</text>
            </g>
          </svg>
        </div>
      </div>

      <!-- Selected House Details -->
      <div class="order-1 lg:order-2 lg:sticky lg:top-24">
        @if (selectedHouse) {
        <div
          class="house-detail-card relative overflow-hidden rounded-2xl border-2 backdrop-blur-sm transition-all duration-300 h-full"
          [style.border-color]="selectedHouse.color + '80'"
          [style.background]="'linear-gradient(135deg, ' + selectedHouse.color + '15, ' + selectedHouse.color + '05)'">
          <!-- Animated Background Glow -->
          <div class="absolute inset-0 opacity-50">
            <div class="absolute top-0 right-0 w-64 h-64 rounded-full blur-3xl transition-all duration-500"
              [style.background]="selectedHouse.color + '20'"></div>
            <div class="absolute bottom-0 left-0 w-64 h-64 rounded-full blur-3xl transition-all duration-500"
              [style.background]="selectedHouse.color + '15'"></div>
          </div>

          <!-- Content -->
          <div class="relative z-10 p-8 md:p-12">
            <!-- Header -->
            <div class="flex flex-col items-start gap-4 mb-8">
              <div class="flex items-center gap-4">
                <div
                  class="w-20 h-20 rounded-full flex items-center justify-center text-4xl border-4 backdrop-blur-sm transition-all duration-300"
                  [style.border-color]="selectedHouse.color + '80'"
                  [style.background]="'linear-gradient(135deg, ' + selectedHouse.color + '40, ' + selectedHouse.color + '20)'">
                  {{ selectedHouse.icon }}
                </div>
                <div>
                  <div class="text-sm text-foreground/60 mb-1">House {{ selectedHouse.number }}</div>
                  <h2 class="text-3xl md:text-4xl font-playfair font-bold text-foreground mb-1">
                    {{ selectedHouse.name }}
                  </h2>
                  <div class="text-lg text-primary font-semibold">{{ selectedHouse.sanskritName }}</div>
                </div>
              </div>
            </div>

            <!-- Significations -->
            <div class="space-y-8">
              <div>
                <h3 class="text-xl font-playfair font-bold text-foreground mb-4 flex items-center gap-2">
                  <span class="text-2xl">‚ú®</span>
                  Significations
                </h3>
                <ul class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2">
                  @for (sig of selectedHouse.significations; track $index) {
                  <li class="flex items-start gap-3 text-foreground/80">
                    <span class="text-primary mt-1 flex-shrink-0">‚óè</span>
                    <span>{{ sig }}</span>
                  </li>
                  }
                </ul>
              </div>

              <div>
                <h3 class="text-xl font-playfair font-bold text-foreground mb-4 flex items-center gap-2">
                  <span class="text-2xl">üîë</span>
                  Keywords
                </h3>
                <div class="flex flex-wrap gap-2">
                  @for (keyword of selectedHouse.keywords; track $index) {
                  <span
                    class="px-4 py-2 rounded-full text-sm font-semibold backdrop-blur-sm transition-all duration-300 hover:scale-105"
                    [style.background]="selectedHouse.color + '30'" [style.color]="selectedHouse.color"
                    [style.border]="'1px solid ' + selectedHouse.color + '50'">
                    {{ keyword }}
                  </span>
                  }
                </div>
              </div>

              <div>
                <h3 class="text-xl font-playfair font-bold text-foreground mb-4 flex items-center gap-2">
                  <span class="text-2xl">ü´Ä</span>
                  Body Parts
                </h3>
                <div class="flex flex-wrap gap-2">
                  @for (part of selectedHouse.bodyParts; track $index) {
                  <span
                    class="px-4 py-2 rounded-full text-sm font-semibold backdrop-blur-sm transition-all duration-300 hover:scale-105"
                    [style.background]="selectedHouse.color + '20'" [style.color]="selectedHouse.color"
                    [style.border]="'1px solid ' + selectedHouse.color + '40'">
                    {{ part }}
                  </span>
                  }
                </div>
              </div>
            </div>
          </div>
        </div>
        } @else {
        <div
          class="house-detail-card relative overflow-hidden rounded-2xl border-2 border-primary/30 backdrop-blur-sm p-12 text-center">
          <div class="text-6xl mb-4">üèõÔ∏è</div>
          <p class="text-foreground/70 text-lg">Select a house from the wheel to view its details</p>
        </div>
        }
      </div>
    </div>

    <!-- All Houses Grid (Alternative View) -->
    <div class="mt-16">
      <h2 class="text-3xl font-playfair font-bold text-foreground text-center mb-8">All Houses at a Glance</h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
        @for (house of houses; track house.number) {
        <button (click)="selectHouse(house)" [class.active]="selectedHouse?.number === house.number"
          class="house-card p-4 rounded-xl border-2 backdrop-blur-sm transition-all duration-300 hover:scale-105 text-left"
          [style.border-color]="house.color + '50'"
          [style.background]="'linear-gradient(135deg, ' + house.color + '20, ' + house.color + '10)'"
          [style.box-shadow]="selectedHouse?.number === house.number ? '0 0 20px ' + house.color + '60' : 'none'">
          <div class="flex items-center gap-3 mb-2">
            <div class="text-2xl">{{ house.icon }}</div>
            <div>
              <div class="text-xs text-foreground/60">House {{ house.number }}</div>
              <div class="font-bold text-foreground">{{ house.name }}</div>
            </div>
          </div>
          <div class="text-sm text-foreground/70 line-clamp-2">{{ house.sanskritName }}</div>
        </button>
        }
      </div>
    </div>

    <!-- Back to Class Recordings Link -->
    <div class="text-center mt-16">
      <a routerLink="/class-recordings"
        class="inline-flex items-center gap-2 text-primary hover:text-accent transition-colors font-semibold group">
        <svg class="w-5 h-5 transform group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor"
          viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        <span>Back to Class Recordings</span>
      </a>
    </div>
  </div>
</main>