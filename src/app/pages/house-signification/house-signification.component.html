<main class="min-h-screen bg-background relative">
  <!-- Cosmic Background with Stars -->
  <div class="cosmic-background fixed inset-0 z-0">
    <div class="twinkling"></div>
    <!-- Additional cosmic elements -->
    <div class="absolute inset-0 overflow-hidden">
      <div class="absolute top-20 left-10 w-96 h-96 bg-primary/10 rounded-full blur-3xl animate-pulse"></div>
      <div class="absolute bottom-20 right-10 w-96 h-96 bg-accent/10 rounded-full blur-3xl animate-pulse"
        style="animation-delay: 1s;"></div>
      <div class="absolute top-1/2 left-1/2 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl animate-pulse"
        style="animation-delay: 2s;"></div>
    </div>
  </div>

  <app-header></app-header>

  <div class="container mx-auto px-4 pt-24 pb-16 relative z-10">
    <!-- Page Header -->
    <div class="text-center mb-16 relative">
      <div class="absolute inset-0 flex items-center justify-center">
        <div class="cosmic-glow w-96 h-96 rounded-full blur-3xl opacity-20"></div>
      </div>
      <h1 class="text-5xl md:text-6xl font-playfair font-bold text-foreground mb-4 relative z-10">
        House Significations
      </h1>
      <p class="text-xl md:text-2xl text-foreground/70 mb-6 relative z-10">
        Explore the cosmic meanings and influences of all 12 astrological houses
      </p>
      <div class="flex items-center justify-center gap-2 relative z-10">
        <div class="h-px w-20 bg-gradient-to-r from-transparent via-primary to-primary"></div>
        <span class="text-3xl">üèõÔ∏è</span>
        <div class="h-px w-20 bg-gradient-to-l from-transparent via-primary to-primary"></div>
      </div>
    </div>

    <!-- Interactive House Wheel and Details Side by Side -->
    <div class="grid lg:grid-cols-2 gap-8 lg:gap-12 mb-16 items-center">
      <!-- Vedic Kundali Chart -->
      <div class="relative order-2 lg:order-1 flex items-center justify-center">
        <div class="kundali-chart-container relative mx-auto"
          style="max-width: 100%; transform: scale(0.84); transform-origin: center;">
          <!-- North Indian Vedic Chart Design with Clickable Overlay -->
          <div class="relative w-full flex items-center justify-center overflow-hidden rounded-2xl chart-wrapper">
            <img id="chart-image" src="/assets/vedic-chart2.png" alt="North Indian Vedic Chart"
              class="w-full h-auto object-contain"
              style="filter: drop-shadow(0 0 20px rgba(255, 193, 99, 0.3)); display: block;"
              onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">

            <!-- Fallback if image not found -->
            <div
              class="hidden w-full h-full items-center justify-center bg-gradient-to-br from-orange-900/20 to-amber-900/20 rounded-lg border-2 border-primary/30 backdrop-blur-sm">
              <div class="text-center p-8">
                <p class="text-foreground/70 mb-2">Image not found</p>
                <p class="text-sm text-foreground/50">Please add vedic-chart.png to src/assets/</p>
              </div>
            </div>

            <!-- SVG Overlay for Clickable Houses -->
            <svg class="chart-overlay" viewBox="0 0 1000 700" preserveAspectRatio="xMidYMid meet"
              xmlns="http://www.w3.org/2000/svg" aria-hidden="false">
              <!-- House 1 (center top) -->
              <a class="house-region" href="#" [attr.data-house]="houses[0].number"
                (click)="selectHouse(houses[0]); $event.preventDefault()">
                <polygon points="500,59 690,180 500,336 310,180" [class.active]="selectedHouse?.number === 1"
                  [attr.fill]="selectedHouse?.number === 1 ? houses[0].color + '40' : 'transparent'"
                  [attr.stroke]="selectedHouse?.number === 1 ? houses[0].color : 'rgba(0,0,0,0)'"></polygon>
              </a>

              <!-- House 2 (top-left) -->
              <a class="house-region" href="#" [attr.data-house]="houses[1].number"
                (click)="selectHouse(houses[1]); $event.preventDefault()">
                <polygon points="38,40 500,40 232,180" [class.active]="selectedHouse?.number === 2"
                  [attr.fill]="selectedHouse?.number === 2 ? houses[1].color + '40' : 'transparent'"
                  [attr.stroke]="selectedHouse?.number === 2 ? houses[1].color : 'rgba(0,0,0,0)'"></polygon>
              </a>

              <!-- House 3 (left top corner) -->
              <a class="house-region" href="#" [attr.data-house]="houses[2].number"
                (click)="selectHouse(houses[2]); $event.preventDefault()">
                <polygon points="20,54 170,180 60,320 20,320" [class.active]="selectedHouse?.number === 3"
                  [attr.fill]="selectedHouse?.number === 3 ? houses[2].color + '40' : 'transparent'"
                  [attr.stroke]="selectedHouse?.number === 3 ? houses[2].color : 'rgba(0,0,0,0)'"></polygon>
              </a>

              <!-- House 4 (upper-left middle) -->
              <a class="house-region" href="#" [attr.data-house]="houses[3].number"
                (click)="selectHouse(houses[3]); $event.preventDefault()">
                <polygon points="220,215 440,390 270,530 54,355" [class.active]="selectedHouse?.number === 4"
                  [attr.fill]="selectedHouse?.number === 4 ? houses[3].color + '40' : 'transparent'"
                  [attr.stroke]="selectedHouse?.number === 4 ? houses[3].color : 'rgba(0,0,0,0)'"></polygon>
              </a>

              <!-- House 5 (lower-left) -->
              <a class="house-region" href="#" [attr.data-house]="houses[4].number"
                (click)="selectHouse(houses[4]); $event.preventDefault()">
                <polygon points="20,370 165,540 20,666" [class.active]="selectedHouse?.number === 5"
                  [attr.fill]="selectedHouse?.number === 5 ? houses[4].color + '40' : 'transparent'"
                  [attr.stroke]="selectedHouse?.number === 5 ? houses[4].color : 'rgba(0,0,0,0)'"></polygon>
              </a>

              <!-- House 6 (bottom left) -->
              <a class="house-region" href="#" [attr.data-house]="houses[5].number"
                (click)="selectHouse(houses[5]); $event.preventDefault()">
                <polygon points="150,620 320,560 500,700 40,700" [class.active]="selectedHouse?.number === 6"
                  [attr.fill]="selectedHouse?.number === 6 ? houses[5].color + '40' : 'transparent'"
                  [attr.stroke]="selectedHouse?.number === 6 ? houses[5].color : 'rgba(0,0,0,0)'"></polygon>
              </a>

              <!-- House 7 (bottom center) -->
              <a class="house-region" href="#" [attr.data-house]="houses[6].number"
                (click)="selectHouse(houses[6]); $event.preventDefault()">
                <polygon points="500,420 660,560 500,700 340,560" [class.active]="selectedHouse?.number === 7"
                  [attr.fill]="selectedHouse?.number === 7 ? houses[6].color + '40' : 'transparent'"
                  [attr.stroke]="selectedHouse?.number === 7 ? houses[6].color : 'rgba(0,0,0,0)'"></polygon>
              </a>

              <!-- House 8 (bottom right) -->
              <a class="house-region" href="#" [attr.data-house]="houses[7].number"
                (click)="selectHouse(houses[7]); $event.preventDefault()">
                <polygon points="660,560 980,560 940,700 500,700" [class.active]="selectedHouse?.number === 8"
                  [attr.fill]="selectedHouse?.number === 8 ? houses[7].color + '40' : 'transparent'"
                  [attr.stroke]="selectedHouse?.number === 8 ? houses[7].color : 'rgba(0,0,0,0)'"></polygon>
              </a>

              <!-- House 9 (lower-right) -->
              <a class="house-region" href="#" [attr.data-house]="houses[8].number"
                (click)="selectHouse(houses[8]); $event.preventDefault()">
                <polygon points="956,390 996,490 956,654 804,574" [class.active]="selectedHouse?.number === 9"
                  [attr.fill]="selectedHouse?.number === 9 ? houses[8].color + '40' : 'transparent'"
                  [attr.stroke]="selectedHouse?.number === 9 ? houses[8].color : 'rgba(0,0,0,0)'"></polygon>
              </a>

              <!-- House 10 (right middle) -->
              <a class="house-region" href="#" [attr.data-house]="houses[9].number"
                (click)="selectHouse(houses[9]); $event.preventDefault()">
                <polygon points="560,360 720,220 920,320 780,500" [class.active]="selectedHouse?.number === 10"
                  [attr.fill]="selectedHouse?.number === 10 ? houses[9].color + '40' : 'transparent'"
                  [attr.stroke]="selectedHouse?.number === 10 ? houses[9].color : 'rgba(0,0,0,0)'"></polygon>
              </a>

              <!-- House 11 (upper-right) -->
              <a class="house-region" href="#" [attr.data-house]="houses[10].number"
                (click)="selectHouse(houses[10]); $event.preventDefault()">
                <polygon points="820,140 980,40 1000,280 760,180" [class.active]="selectedHouse?.number === 11"
                  [attr.fill]="selectedHouse?.number === 11 ? houses[10].color + '40' : 'transparent'"
                  [attr.stroke]="selectedHouse?.number === 11 ? houses[10].color : 'rgba(0,0,0,0)'"></polygon>
              </a>

              <!-- House 12 (top-right corner) -->
              <a class="house-region" href="#" [attr.data-house]="houses[11].number"
                (click)="selectHouse(houses[11]); $event.preventDefault()">
                <polygon points="600,40 970,40 780,150 780,180" [class.active]="selectedHouse?.number === 12"
                  [attr.fill]="selectedHouse?.number === 12 ? houses[11].color + '40' : 'transparent'"
                  [attr.stroke]="selectedHouse?.number === 12 ? houses[11].color : 'rgba(0,0,0,0)'"></polygon>
              </a>
            </svg>
          </div>
        </div>
      </div>

      <!-- Selected House Details -->
      <div class="order-1 lg:order-2 lg:sticky lg:top-24">
        @if (selectedHouse) {
        <div
          class="house-detail-card relative overflow-hidden rounded-2xl border-2 backdrop-blur-sm transition-all duration-300 h-full"
          [style.border-color]="selectedHouse.color + '80'"
          [style.background]="'linear-gradient(135deg, ' + selectedHouse.color + '15, ' + selectedHouse.color + '05)'">
          <!-- Animated Background Glow -->
          <div class="absolute inset-0 opacity-50">
            <div class="absolute top-0 right-0 w-64 h-64 rounded-full blur-3xl transition-all duration-500"
              [style.background]="selectedHouse.color + '20'"></div>
            <div class="absolute bottom-0 left-0 w-64 h-64 rounded-full blur-3xl transition-all duration-500"
              [style.background]="selectedHouse.color + '15'"></div>
          </div>

          <!-- Content -->
          <div class="relative z-10 p-8 md:p-12">
            <!-- Header -->
            <div class="flex flex-col items-start gap-4 mb-8">
              <div class="flex items-center gap-4">
                <div
                  class="w-20 h-20 rounded-full flex items-center justify-center text-4xl border-4 backdrop-blur-sm transition-all duration-300"
                  [style.border-color]="selectedHouse.color + '80'"
                  [style.background]="'linear-gradient(135deg, ' + selectedHouse.color + '40, ' + selectedHouse.color + '20)'">
                  {{ selectedHouse.icon }}
                </div>
                <div>
                  <div class="text-sm text-foreground/60 mb-1">House {{ selectedHouse.number }}</div>
                  <h2 class="text-3xl md:text-4xl font-playfair font-bold text-foreground mb-1">
                    {{ selectedHouse.name }}
                  </h2>
                  <div class="text-lg text-primary font-semibold">{{ selectedHouse.sanskritName }}</div>
                </div>
              </div>
            </div>

            <!-- Significations -->
            <div class="space-y-8">
              <div>
                <h3 class="text-xl font-playfair font-bold text-foreground mb-4 flex items-center gap-2">
                  <span class="text-2xl">‚ú®</span>
                  Significations
                </h3>
                <ul class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2">
                  @for (sig of selectedHouse.significations; track $index) {
                  <li class="flex items-start gap-3 text-foreground/80">
                    <span class="text-primary mt-1 flex-shrink-0">‚óè</span>
                    <span>{{ sig }}</span>
                  </li>
                  }
                </ul>
              </div>

              <div>
                <h3 class="text-xl font-playfair font-bold text-foreground mb-4 flex items-center gap-2">
                  <span class="text-2xl">üîë</span>
                  Keywords
                </h3>
                <div class="flex flex-wrap gap-2">
                  @for (keyword of selectedHouse.keywords; track $index) {
                  <span
                    class="px-4 py-2 rounded-full text-sm font-semibold backdrop-blur-sm transition-all duration-300 hover:scale-105"
                    [style.background]="selectedHouse.color + '30'" [style.color]="selectedHouse.color"
                    [style.border]="'1px solid ' + selectedHouse.color + '50'">
                    {{ keyword }}
                  </span>
                  }
                </div>
              </div>

              <div>
                <h3 class="text-xl font-playfair font-bold text-foreground mb-4 flex items-center gap-2">
                  <span class="text-2xl">ü´Ä</span>
                  Body Parts
                </h3>
                <div class="flex flex-wrap gap-2">
                  @for (part of selectedHouse.bodyParts; track $index) {
                  <span
                    class="px-4 py-2 rounded-full text-sm font-semibold backdrop-blur-sm transition-all duration-300 hover:scale-105"
                    [style.background]="selectedHouse.color + '20'" [style.color]="selectedHouse.color"
                    [style.border]="'1px solid ' + selectedHouse.color + '40'">
                    {{ part }}
                  </span>
                  }
                </div>
              </div>
            </div>
          </div>
        </div>
        } @else {
        <div
          class="house-detail-card relative overflow-hidden rounded-2xl border-2 border-primary/30 backdrop-blur-sm p-12 text-center">
          <div class="text-6xl mb-4">üèõÔ∏è</div>
          <p class="text-foreground/70 text-lg">Select a house from the wheel to view its details</p>
        </div>
        }
      </div>
    </div>

    <!-- All Houses Grid (Alternative View) -->
    <div class="mt-16">
      <h2 class="text-3xl font-playfair font-bold text-foreground text-center mb-8">All Houses at a Glance</h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
        @for (house of houses; track house.number) {
        <button (click)="selectHouse(house)" [class.active]="selectedHouse?.number === house.number"
          class="house-card p-4 rounded-xl border-2 backdrop-blur-sm transition-all duration-300 hover:scale-105 text-left"
          [style.border-color]="house.color + '50'"
          [style.background]="'linear-gradient(135deg, ' + house.color + '20, ' + house.color + '10)'"
          [style.box-shadow]="selectedHouse?.number === house.number ? '0 0 20px ' + house.color + '60' : 'none'">
          <div class="flex items-center gap-3 mb-2">
            <div class="text-2xl">{{ house.icon }}</div>
            <div>
              <div class="text-xs text-foreground/60">House {{ house.number }}</div>
              <div class="font-bold text-foreground">{{ house.name }}</div>
            </div>
          </div>
          <div class="text-sm text-foreground/70 line-clamp-2">{{ house.sanskritName }}</div>
        </button>
        }
      </div>
    </div>

    <!-- Back to Class Recordings Link -->
    <div class="text-center mt-16">
      <a routerLink="/class-recordings"
        class="inline-flex items-center gap-2 text-primary hover:text-accent transition-colors font-semibold group">
        <svg class="w-5 h-5 transform group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor"
          viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        <span>Back to Class Recordings</span>
      </a>
    </div>
  </div>
</main>